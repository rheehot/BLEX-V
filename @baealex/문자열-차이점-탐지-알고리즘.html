

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <meta name="theme-color" content="#000">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-113864080-4"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-113864080-4');
    </script>
    

<meta name="description" content="깃허브를 사용하면서 단 한 번도 버전관리가 &#39;어떻게&#39; 작동하고 있는지 관심을 가지지 않았다. 그저 &quot;변경된 &#39;무언가&#39;를 감지하겠지&quot;라는 생각 뿐이었다. 그러다 깃처럼 우리의 블로그에도 버전관리를 넣어보면 어떨까 싶었다. 변경된 점을 유지하기 위함이 아니라 다른 사용자가 내 글에 참여할 수 있는 기능을 위해서 말이다. 그러기 위해선 버전관리라는 시스템에 대해서 이해해야했다. Git, 대체 어떻게 …">
<meta property="og:url" content="https://blex.kr/@baealex/%EB%AC%B8%EC%9E%90%EC%97%B4-%EC%B0%A8%EC%9D%B4%EC%A0%90-%ED%83%90%EC%A7%80-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98">
<meta property="og:type" content="blog">
<meta property="og:title" content="문자열 차이점 탐지 알고리즘">
<meta property="og:description" content="깃허브를 사용하면서 단 한 번도 버전관리가 &#39;어떻게&#39; 작동하고 있는지 관심을 가지지 않았다. 그저 &quot;변경된 &#39;무언가&#39;를 감지하겠지&quot;라는 생각 뿐이었다. 그러다 깃처럼 우리의 블로그에도 버전관리를 넣어보면 어떨까 싶었다. 변경된 점을 유지하기 위함이 아니라 다른 사용자가 내 글에 참여할 수 있는 기능을 위해서 말이다. 그러기 위해선 버전관리라는 시스템에 대해서 이해해야했다. Git, 대체 어떻게 …">
<meta property="og:site_name" content="BLEX">
<meta property="og:image" content="https://static.blex.kr/title/baealex/2020/1/4/15q71f.jpg">
<meta property="og:locale" content="ko_KR">
<meta property="article:author" content="baealex">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="문자열 차이점 탐지 알고리즘">
<meta name="twitter:url" content="https://blex.kr/@baealex/%EB%AC%B8%EC%9E%90%EC%97%B4-%EC%B0%A8%EC%9D%B4%EC%A0%90-%ED%83%90%EC%A7%80-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98">
<meta name="twitter:description" content="깃허브를 사용하면서 단 한 번도 버전관리가 &#39;어떻게&#39; 작동하고 있는지 관심을 가지지 않았다. 그저 &quot;변경된 &#39;무언가&#39;를 감지하겠지&quot;라는 생각 뿐이었다. 그러다 깃처럼 우리의 블로그에도 버전관리를 넣어보면 어떨까 싶었다. 변경된 점을 유지하기 위함이 아니라 다른 사용자가 내 글에 참여할 수 있는 기능을 위해서 말이다. 그러기 위해선 버전관리라는 시스템에 대해서 이해해야했다. Git, 대체 어떻게 …">
<meta name="twitter:image" content="https://static.blex.kr/title/baealex/2020/1/4/15q71f.jpg">

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    <link rel="stylesheet" href="https://static.blex.kr/assets/library/bootstrap.css">
    <link rel="stylesheet" href="https://static.blex.kr/assets/library/prism.css">
    <link rel="stylesheet" href="https://static.blex.kr/assets/css/main.css?version=1.0.36">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Serif+KR|Noto+Sans+KR">
    <link rel="icon" href="https://static.blex.kr/assets/images/logo.png">
    <title>문자열 차이점 탐지 알고리즘 – baealex</title>
</head>
<body>
    

<style>.content {margin-top: 20px;} #mNavigation {background: rgba(0, 0, 0, 0); position: absolute;}</style>
<div>
    <picture class="post-title-image">
        <img src="https://static.blex.kr/title/baealex/2020/1/4/15q71f.jpg" alt="문자열 차이점 탐지 알고리즘">
        <div class="post-image-mask">
            <h1 class="post-headline"><span class="post-series">'블렉스 이야기' 시리즈</span>문자열 차이점 탐지 알고리즘</h1>
            <p class="post-date">2019-12-30 17:38<span>(Last Update: 2020-01-04 15:15)<span></p>
        </div>
    </picture>
</div>


    
    <nav id="mNavigation" class="navbar navbar-expand-sm navbar-dark bg-theme fixed-top">
        <div class="container">
            <a class="navbar-brand" onmousedown="distoryLatelyPosition()" href="https://blex.kr">
                <img src="https://static.blex.kr/assets/images/logor.png" width="35" height="35" alt="">
            </a>
            
<ul class="navbar-nav">
    <li class="nav-item">
        <a class="nav-link" href="/@baealex">baealex</a>
    </li>
</ul>

    
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarNavAltMarkup">
            
<ul class="navbar-nav">
    <li class="nav-item">
        <a id="heart" class="nav-link" href="javascript:void(0);" onclick="posts.like(266);">
            <i class="far fa-heart"></i> <span id="like-count">1</span>
        </a>
    </li>
    
    <li class="nav-item">
        <a class="nav-link" href="javascript:void(0)" onclick="moveSlide('comment')">
            <i class="far fa-comment"></i> 1
        </a>
    </li>
    
    <li class="nav-item">
        <div class="dropdown">
            <a class="nav-link" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"">
                <i class="fas fa-share-alt"></i>
            </a>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <a class="dropdown-item" target="_blank" href="https://facebook.com/sharer.php?u=https://blex.kr/@baealex/%EB%AC%B8%EC%9E%90%EC%97%B4-%EC%B0%A8%EC%9D%B4%EC%A0%90-%ED%83%90%EC%A7%80-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;"><i class="fab fa-facebook-square"></i> Facebook</a>
                <a class="dropdown-item" target="_blank" href="https://twitter.com/intent/tweet?text=문자열 차이점 탐지 알고리즘&url=https://blex.kr/@baealex/%EB%AC%B8%EC%9E%90%EC%97%B4-%EC%B0%A8%EC%9D%B4%EC%A0%90-%ED%83%90%EC%A7%80-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;"><i class="fab fa-twitter-square"></i> Twitter</a>
            </div>
        </div>
    </li>
</ul>

            
            </div>
        </div>
    </nav>
    
    <div class="container">
        <div class="content">
        
<div class="row">
    <div class="ml-auto col-lg-8">
        
        
        <div class="row post-top-meta" onmousedown="distoryLatelyPosition()">
    <a href="/@baealex">
        
        <div class="back-image thumb author-thumb" style="background-image:url(https://static.blex.kr/avatar/u/baealex/yAAi.png)"></div>
        
    </a>
    <div class="author-info">
        <h4><a href="/@baealex">baealex</a><span class="ns ml-2"><i class="fas fa-battery-full"></i> 95%</span></h4>
            
            <p class="author-description">소비적인 일보단 생산적인 일을 추구하며,
좋아하는 일을 잘하고 싶어합니다 😀</p>
            
            <ul class="author-state">
                <li>
                    <img src="https://img.shields.io/badge/-master-purple">
                </li>
                <li onclick="userFollow('baealex')">
                    <img class="follow-badge" src="https://img.shields.io/badge/subscriber-2-red?style=social">
                </li>
            </ul>
            
            <a class="author-email d-block" href="/login">Sign in to view email</a>
            
        </p>
    </div>
</div>
        <article class="article noto">
            <p>깃허브를 사용하면서 단 한 번도 버전관리가 '어떻게' 작동하고 있는지 관심을 가지지 않았다. 그저 "변경된 '무언가'를 감지하겠지"라는 생각 뿐이었다. 그러다 깃처럼 우리의 블로그에도 버전관리를 넣어보면 어떨까 싶었다. 변경된 점을 유지하기 위함이 아니라 다른 사용자가 내 글에 참여할 수 있는 기능을 위해서 말이다. 그러기 위해선 버전관리라는 시스템에 대해서 이해해야했다.</p>
<p><br></p>
<h6>Git, 대체 어떻게 작동하지?</h6>
<p>인터넷에 'Git의 원리'라고 검색하면 깃이 어떻게 작동하고 있는지 알려준다. <code>add</code>를 하고 <code>commit</code>을 하고 <code>push</code>를 하면 어떻게 동작하는지 말이다. 내가 궁금한 것은 그런게 아니라 더 깊은 내용이다. 하지만 검색 키워드를 도통 찾을 수 없어 직접 개발해야 할 것 같다. 이 글은 아마 그 작업에 대한 실험과 고찰이 될 것이다. 우선은 문자열을 가지고 장난쳐 봐야겠다.</p>
<p><br></p>
<h6>문자열 변경 감지</h6>
<pre><code class="language-python">old_text = ["안녕하세요, 배준호입니다.", 0]
new_text = ["안녕하세요, 배진오입니다!", 1]</code></pre>
<p>먼저 위와같은 문자열을 두자. 현재는 테스트를 위해서 배열의 첫번째 인덱스엔 문자열을 두번째엔 정수를 넣었지만 실제로는 정수가 들어갈 부분에 시간을 넣어서 비교할 생각이다. 우선 위 문자가 똑같은지 다른지 비교를하자. 달라진 게 없다면 버전을 관리할 필요가 없으니까.</p>
<p>기본적인 방법으로 길이 혹은 사이즈로 구분하면 위 문자열의 경우 변경되었는지 전혀 분간할 수 없으므로 우선 성능이 제일 빠를 것 같은 길이로 먼저 비교한 뒤 집합으로 변경하여 차집합을 구하도록 하였다.</p>
<pre><code class="language-python">def is_change(old_text, new_text):
    if len(old_text) == len(new_text):
        if len(set(old_text) - set(new_text)) == 0:
            return False
    return True</code></pre>
<pre><code class="language-python">old_text = ["안녕하세요, 배준호입니다.", 0]
new_text = ["안녕하세요, 배진오입니다!", 1]

print(is_change(old_text[0], new_text[0])) # True</code></pre>
<pre><code class="language-python">old_text = ["가", 0]
new_text = ["가가가가가", 1]

print(is_change(old_text[0], new_text[0])) # True</code></pre>
<pre><code class="language-python">old_text = ["가다", 0]
new_text = ["가다", 1]

print(is_change(old_text[0], new_text[0])) # False</code></pre>
<p>의도한 대로 동작한다.</p>
<h6>변경된 지점 탐색</h6>
<ul>
<li>가장 쉽게 버전관리 하는 방법 : 위와같이 다르다는게 입증되면 그냥 데이터베이스에 때려박아 놨다가 사용자가 병합하면 합쳐버리고 데이터를 지운다.<ul>
<li>용량이 너무 아까움</li>
<li>사용자한테 바뀐 지점 보여주려면 2번 일해야 됨</li>
<li>자바스크립트보단 파이썬으로 하고 싶음</li>
</ul>
</li>
</ul>
<p>아마도 해당 함수를 만든다면 아래와 같은 입력에서 다음과 같은 출력을 만들고 싶다.</p>
<pre><code>안녕하세요. 배준호입니다.

BLEX는 모두를 위한 블로그 서비스입니다.
언제까지나 무료입니다.

감사합니다. 배준호입니다.</code></pre>
<pre><code>안녕하세요. 배진오입니다.

BLEX는 모두를 위한 블로그 서비스는 맞지만...
부분유료화가 될지도 모르죠?

감사합니다. 배진오입니다.</code></pre>
<pre><code>[
    [0, "준호", "진오"],
    [1, "입니다", "는 맞지만.."]
    [0, "언제까지나 무료입니다.", "부분유료화가 될지도 모르죠?"]
    [1, "준호", "진오"]
]</code></pre>
<p>첫번째 인덱스의 의미는 인덱스다. '배준호'라는 문장은 2번 나오는데 그중에 첫번째 단어라는 의미이다. (이거 보다는 탐색중인 위치를 기록하는게 여러모로 편리할 듯) 두번째 인덱스의 의미는 원문 세번째 인덱스의 의미는 수정문이다. 일단 다음과 같이 탐색하면 되지 않을까?</p>
<p>원문과 변경글을 순차적으로 탐색하다가 다른 지점을 감지한다. 그 순간부터 배열에 차곡차곡 쌓는다. 그리고 다시 같아지는 지점으로 넘어가면 결과 배열에 넣어준다.</p>
<pre><code class="language-python">def changed_list(old_text, new_text):
    point = 0
    data = {
        'results': list(),
    }

    new_list = {
        'point': int(),
        'old': str(),
        'new': str()
    }
    while True:
        if not old_text[point] == new_text[point]:
            new_list['point'] = point
            new_list['old'] += old_text[point]
            new_list['new'] += new_text[point]
            break
        point += 1
    data['results'].append(new_list)
    return data

# {'results': [{'new': '\xa7', 'old': '\xa4', 'point': 22}]}</code></pre>
<p>만들다가 급작스런 뇌정지가 발생했다. 고려할 점이 너무나 많았다. 특히 글자 갯수가 다른 경우 어디부터 어디까지 구분시킬지 판단할 수가 없었다. 그리고 길이가 다른 경우 다시 같아지는 지점을 찾는 것은 매우 극악이다. 성능도 너무 구려지고... 우선 공통되는 부분을 전체적으로 삭제하는 방식으로 접근하면 어떨까 싶었다.</p>
<pre><code class="language-python">import re
def remove_common(old_text, new_text):
    old_word_lists = re.split(' |\n', old_text)
    new_word_lists = re.split(' |\n', new_text)
    return {
        'old': set(old_word_lists) - set(new_word_lists),
        'new': set(new_word_lists) - set(old_word_lists), 
    }

for i in remove_common(old_text[0], new_text[0])['new']:
    print(i)
print('-----')
for i in remove_common(old_text[0], new_text[0])['old']:
    print(i)

"""
부분유료화가
될지도
모르죠?
배진오입니다.
맞지만...
서비스는
-----
무료입니다.
서비스입니다.
배준호입니다.
언제까지나
"""</code></pre>
<p>공통 부분을 제거했다. 이제 이 부분을 원문에서 위치를 감지하고 원레 출력하고자 하는 결과물로 출력하고자 하였다. 다만 또 문제는 어떤 부분이 어떤 문자에서 변형된 것인지 알 방도가 없다. 그냥 수정을 허용하는 사용자에게 원문과 수정문을 보여주고 어떤 부분이 변경되었는지 어떤 부분이 추가되었는지 두개의 분활된 화면으로 보여주면 될 것 같다! 역시 난 똑똑해!</p>
<p>데이터 베이스엔 변경되기 전 부분의 [포인트, 문장]과 변경된 후 부분의 [포인트, 문장]을 저장하자. 중복되는 문장은 어떻게 처리하지? 결국 가장 하고 싶지 않았던 방법인 데이터 통째로 때려넣기를 사용해야 할 것 같다. 아... 점점 산으로 가는구나.</p>
<h6>변경사항 적용하기</h6>
<p><del>첫번째 인덱스엔 위치가 있고 두번째 인덱스엔 원문이 있으므로 첫번째 인덱스에서 원문의 길이만큼을 변경문으로 변경하면 된다. 다만 길이가 다른 문자열로 변경되면 첫번째 인덱스의 위치의 의미가 무색해진다. 따라서 변경한 지점의 다음 배열들의 첫번째 인덱스의 값을 변경문과 원문의 길이 차이만큼 더해주어야 한다.</del></p>
        </article>
        
            <div class="my-4 text-center">
    <h5 class="serif bg-dark p-4"><a href="/@baealex/series/%EB%B8%94%EB%A0%89%EC%8A%A4-%EC%9D%B4%EC%95%BC%EA%B8%B0" class="text-decoration-none text-white">'블렉스 이야기' 시리즈</a></h5>
    <div class="row justify-content-between">
        <div class="col-md-6">
        
            <div class="col-md-12 bg-light rounded p-3 mt-3">
                <a class="text-decoration-none deep-dark" href="/@baealex/%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%9D%B4%EC%9A%A9%EC%95%BD%EA%B4%80?series=블렉스-이야기">
                    <i class="fas fa-arrow-circle-left vivid-purple"></i><br>서비스 이용약관
                </a>
            </div>
        
        </div>
        <div class="col-md-6">
        
            <div class="col-md-12 bg-light rounded p-3 mt-3">
                <a class="text-decoration-none deep-dark" href="/@baealex/%EC%82%AC%EC%9A%A9%EC%9E%90-%EB%8C%93%EA%B8%80-%ED%83%9C%EA%B7%B8-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98?series=블렉스-이야기">
                    <i class="fas fa-arrow-circle-right vivid-purple"></i><br>사용자 댓글 태그 알고리즘
                </a>
            </div>
        
        </div>
    </div>
</div>
        
        
        
        <ul class="tag-list">
            
            <li><a href="/@baealex/topic/%EA%B0%9C%EB%B0%9C%EC%9D%BC%EC%A7%80">개발일지</a></li>
            
            <li><a href="/@baealex/topic/%EB%B8%94%EB%A0%89%EC%8A%A4">블렉스</a></li>
            
        </ul>
    </div>
    <div class="col-lg-2 mobile-disable">
        <div id="article-nav" class="sticky-top sticky-top-100"></div>
    </div>
</div>

<div id="comment" class="mt-5">
    
        
            <div >
    <div class="comment-list">
        <a href="/@baealex">
            
            <div class="back-image thumb comment-thumb" style="background-image:url(https://static.blex.kr/avatar/u/baealex/yAAi.png)"></div>
            
        </a>
        <a class="font-weight-bold deep-dark" href="/@baealex">baealex</a>
        <br>
        <small>1개월, 3주전</small>
        <ul class="none-list">
        
            
        
        </ul>
        <div class="mt-3 noto"><p>이 길은 내 길이 아니었다...</p></div>
        <ul class="none-list">
            <li>
                <a class="shallow-dark" href="javascript:void(0);" onclick="comment.like(185)">
                    <i class="fas fa-angle-up"></i> <span id="clc185">0</span>
                </a>
            </li>
            
        </ul>
    </div>
</div>
        
    
</div>


    
    <div class="alert alert-warning">로그인된 사용자만 댓글을 작성할 수 있습니다.</div>
    

</div>
</div>
<div class="rel-posts">
    <div class="container pt-4 pb-2">
        <div class="header-title">
            <h4 class="serif">이 작성자가 게시한 다른 글</h4>
        </div>
        <div class="row">
        
            <div class="col-md-4">
                <a href="/@baealex/%EC%A4%91%EA%B0%84-%EB%8C%93%EA%B8%80-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98"><div class="back-image rel-post-image" style="background-image: url(https://static.blex.kr/title/baealex/2020/1/10/1XmX5.png);"></div></a>
                <h5 class="serif pt-3 pb-4 ns"><a class="deep-dark" href="/@baealex/%EC%A4%91%EA%B0%84-%EB%8C%93%EA%B8%80-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98">중간 댓글 알고리즘</a></h5>
            </div>
        
            <div class="col-md-4">
                <a href="/@baealex/%EC%82%AC%EC%9A%A9%EC%9E%90%EC%99%80-%EC%8B%9C%EB%A6%AC%EC%A6%88%EC%99%80-%ED%8F%AC%EC%8A%A4%ED%8A%B8%EC%9D%98-%EA%B4%80%EA%B3%84"><div class="back-image rel-post-image" style="background-image: url(https://static.blex.kr/title/baealex/2020/1/4/15D3r3.jpg);"></div></a>
                <h5 class="serif pt-3 pb-4 ns"><a class="deep-dark" href="/@baealex/%EC%82%AC%EC%9A%A9%EC%9E%90%EC%99%80-%EC%8B%9C%EB%A6%AC%EC%A6%88%EC%99%80-%ED%8F%AC%EC%8A%A4%ED%8A%B8%EC%9D%98-%EA%B4%80%EA%B3%84">사용자와 시리즈와 포스트의 관계</a></h5>
            </div>
        
            <div class="col-md-4">
                <a href="/@baealex/%EC%B2%AB-%EC%B6%9C%EA%B7%BC%EC%9D%84-%EC%A4%80%EB%B9%84%ED%95%98%EB%8A%94-%EC%9E%90%EC%84%B8"><div class="back-image rel-post-image" style="background-image: url(https://static.blex.kr/title/baealex/2020/2/17/23NBxM.jpg);"></div></a>
                <h5 class="serif pt-3 pb-4 ns"><a class="deep-dark" href="/@baealex/%EC%B2%AB-%EC%B6%9C%EA%B7%BC%EC%9D%84-%EC%A4%80%EB%B9%84%ED%95%98%EB%8A%94-%EC%9E%90%EC%84%B8">첫 출근을 준비하는 자세</a></h5>
            </div>
        
        </div>
    </div>
</div>

        </div>
    </div>
    
    <footer class="page-footer font-small bg-theme">
    </div>
        <div class="footer-copyright text-center py-3">Copyright 2019 &copy; <a style="color:#fff" href="https://im.baejino.com">BaeJino</a>.
    </div>
</footer>

    <script type="text/javascript" src="https://static.blex.kr/assets/library/jquery.js"></script>
    <script type="text/javascript" src="https://static.blex.kr/assets/library/bootstrap.js"></script>
    <script type="text/javascript" src="https://static.blex.kr/assets/js/main.js?version=1.0.36"></script>
    <script type="text/javascript" src="https://static.blex.kr/assets/js/renderer.js?version=1.0.36"></script>
    <script type="text/javascript" src="https://static.blex.kr/assets/js/notify.js?version=1.0.36"></script>
    <div id="notify-content"></div>
    
<script type="text/javascript" src="https://static.blex.kr/assets/library/prism.js"></script>
<script type="text/javascript" src="https://static.blex.kr/assets/library/autolink.js"></script>
<script type="text/javascript" src="https://static.blex.kr/assets/js/posts.js?version=1.0.36"></script>
<script type="text/javascript" src="https://static.blex.kr/assets/js/user.js?version=1.0.36"></script>

<script type="text/javascript" src="https://static.blex.kr/assets/js/navigation.js?version=1.0.36"></script>

<script>
$(document).ready(function() {
  var csrftoken = getCookie('csrftoken');
  $.ajaxSetup({
    beforeSend: function(xhr, settings) {
      if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
        xhr.setRequestHeader("X-CSRFToken", csrftoken);
      }
    }
  });
});
</script>

    
</body>
</html>
